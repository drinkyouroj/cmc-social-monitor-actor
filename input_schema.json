{
  "title": "CMC Social Monitor input",
  "type": "object",
  "schemaVersion": 1,
  "properties": {
    "platformRuns": {
      "title": "Platform runs",
      "type": "array",
      "editor": "json",
      "description": "List of platform scraper Actors to run (Apify Store or your own). Their output datasets will be filtered.",
      "items": {
        "type": "object",
        "required": ["name", "actorId", "input"],
        "properties": {
          "name": {
            "title": "Name",
            "type": "string",
            "description": "Short platform label (e.g. x, youtube, reddit)."
          },
          "actorId": {
            "title": "Actor ID",
            "type": "string",
            "description": "Actor ID in Apify, e.g. apify/twitter-scraper."
          },
          "input": {
            "title": "Actor input",
            "type": "object",
            "description": "Input for the referenced Actor."
          }
        }
      },
      "default": []
    },
    "match": {
      "title": "Matching rules",
      "type": "object",
      "editor": "json",
      "properties": {
        "symbols": {
          "title": "Symbols / terms",
          "type": "array",
          "editor": "json",
          "items": { "type": "string" },
          "default": ["DGRAM"],
          "description": "Symbols/terms to monitor for (e.g. token symbols like DGRAM). Exact matching depends on caseInsensitive + useWordBoundaries."
        },
        "caseInsensitive": {
          "title": "Case insensitive",
          "type": "boolean",
          "default": true,
          "description": "If true, matching ignores letter case (e.g. dgram matches DGRAM)."
        },
        "useWordBoundaries": {
          "title": "Use word boundaries",
          "type": "boolean",
          "default": false,
          "description": "If true, symbols are matched as whole words (\\bDGRAM\\b). Useful to reduce false positives."
        }
      },
      "default": {
        "symbols": ["DGRAM"],
        "caseInsensitive": true,
        "useWordBoundaries": false
      }
    },
    "dedupe": {
      "title": "Dedupe",
      "type": "object",
      "editor": "json",
      "properties": {
        "enabled": {
          "title": "Enabled",
          "type": "boolean",
          "default": true,
          "description": "If true, avoid emitting the same item multiple times across runs."
        },
        "maxSeenIdsPerPlatform": {
          "title": "Max seen IDs per platform",
          "type": "integer",
          "default": 5000,
          "minimum": 100
          ,
          "description": "Upper bound for stored IDs per platform in state (higher = less repeat alerts, more storage)."
        }
      },
      "default": { "enabled": true, "maxSeenIdsPerPlatform": 5000 }
    },
    "notify": {
      "title": "Notifications",
      "type": "object",
      "editor": "json",
      "properties": {
        "webhookUrl": {
          "title": "Webhook URL",
          "type": "string",
          "default": "",
          "description": "If set, POST a JSON payload for each emitted match."
        }
      },
      "default": { "webhookUrl": "" }
    },
    "debug": {
      "title": "Debug",
      "type": "object",
      "editor": "json",
      "properties": {
        "maxItemsPerDataset": {
          "title": "Max items per dataset",
          "type": "integer",
          "default": 1000,
          "minimum": 1,
          "description": "Safety limit when reading items from each platform dataset."
        }
      },
      "default": { "maxItemsPerDataset": 1000 }
    }
  },
  "required": ["platformRuns", "match"]
}


